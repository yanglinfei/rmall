# 商品管理模块

### 功能介绍

- 前台功能：产品搜索、动态排序列表、商品详情
- 后台功能：商品列表、商品搜索、图片上传、富文本上传、商品详情、商品上下架、

增加商品、更新商品

### 功能特点

- FTP服务的对接
- SpringMVC文件上传
- 抽象POJO、BO、VO对象之间的转换
- jada-time实现数据库中字符与Date对象之间的转换
- Mybatis-PageHelper分页及动态排序

### 数据表设计

| rmall_product | 类型     |
| ------------- | -------- |
| id            | int      |
| category_id   | int      |
| name          | varchar  |
| subtitle      | varchar  |
| main_image    | varchar  |
| sub_images    | text     |
| detial        | text     |
| price         | decimal  |
| stock         | int      |
| status        | int      |
| create_time   | datetime |
| update_time   | datetime |

### 接口设计

**商品管理部分**

/manage/product路径下

1. 新增或更新产品

/save.do

```java
ServerResponse productSave(HttpSession session, Product product)
```

2. 商品上下架

/set_sale_status.do

```java
 ServerResponse setSaleStatus(HttpSession session, Integer productId, Integer status)
```

3. 商品详情

/detail.do

```java
 ServerResponse getDetail(HttpSession session, Integer productId)
```

4. 商品列表

/list.do

```java
 ServerResponse getList(HttpSession session, @RequestParam(value = "pageNum", defaultValue = "1") Integer pageNum, @RequestParam(value = "pageSize", defaultValue = "10") Integer pageSize)
```

5. 商品搜索

/search.do

```java
 ServerResponse getList(HttpSession session, String productName, Integer productId,@RequestParam(value = "pageNum", defaultValue = "1") Integer pageNum, @RequestParam(value = "pageSize", defaultValue = "10") Integer pageSize)
```

6. 商品图片上传

/upload.do

```java
 ServerResponse upload(HttpSession session,@RequestParam(value = "upload_file") MultipartFile file, HttpServletRequest request)
```

7. 富文本上传

/richtext_img_upload.do

```java
 Map richtextImgUpload(HttpSession session, @RequestParam(value = "upload_file") MultipartFile file, HttpServletRequest request, HttpServletResponse response)
```



**用户部分**

/product路径下

1. 商品详情

/detail.do

```java
ServerResponse<ProductDetailVo> detail(Integer productId)
```

2. 列表

/list.do

```java
 ServerResponse<PageInfo> list(@RequestParam(value = "keyword", required = false) String keyword,
                                         @RequestParam(value = "categoryId", required = false) Integer categoryId,
                                         @RequestParam(value = "pageNum", defaultValue = "1") int pageNum,
                                         @RequestParam(value = "pageSize", defaultValue = "10") int pageSize,
                                         @RequestParam(value = "orderBy", defaultValue = "") String orderBy)
```